# LAD-IMPL-014：执行节奏与推进策略（草案）

> 作用：作为 014「链接处理体验」任务的实用执行指导，帮助在修复 013 遗留问题与开展 014/015 之间把握节奏，避免返工。

---

## 1. 总体思路

- 先把 **013 遗留 CI / 线上问题** 当作 014 的「地基」，清理到稳定绿色。
- 再按 **小步快跑** 的方式推进 014：一次只选一个体验点（预览行为 / 状态反馈 / 指标埋点），完成「实现 + 测试」。
- 每完成一块 014 体验项，顺手思考一次 015 诊断要如何观察这块（但暂不强行实现）。

---

## 2. 建议执行节奏

### 阶段 1：用 014 Checklist 收尾 013 遗留 CI

参考 `docs/014-体验优化说明-checklist.md`：

1. 聚焦 checklist 的：
   - §1.2「与 013 遗留 CI / 线上问题的收尾」
   - §1.2.1「013 遗留 CI 用例 → 014 前置体验项映射」
2. 逐行处理 §1.2.1 映射表中列出的 CI 测试：
   - `IntegrationTest.test_08_signal_connections`
   - `TestFileResolver.test_resolve_markdown_file`
   - `test_successful_function_mapping` / `test_missing_functions` / `test_non_callable_functions`
   - `test_enable_monitoring_creates_metrics`
3. 对每个用例，做到：
   - 本地/CI 稳定通过；
   - 相关 WARNING/ERROR 日志收敛到可接受范围；
   - 在 checklist 的 §1.2 / §5.3 打勾，并在「备注」中简单记录修复思路。

> 说明：这一阶段其实已经在执行 014 的「0~0.5 阶段」，因为所有这些 CI 用例都映射到了 014 的前置体验项。

---

### 阶段 2：从 014 中挑一个体验点「小步切入」

完成阶段 1 后，从 checklist 中选择**一个**性价比最高的体验点开始：

- 推荐优先级（可按需要调整）：
  1. §2.1 预览行为中的「超时场景」与「大体积资源截断」；
  2. §2.2 UI 状态与反馈中的「加载中状态」；
  3. §3.1 指标与埋点中的 `link_processing_latency` 与错误计数。

对选中的体验点，执行固定流程：

1. 在 checklist（§2 / §3）中锁定对应条目；
2. 梳理当前实现是否已有部分能力（例如已有简单预览或日志）；
3. 设计 1–2 条最小测试用例（见 checklist §5.1 / §5.2 提示）；
4. 补足代码实现 + 测试；
5. 在 checklist 勾选对应条目，并记录关键决策（如阈值、超时策略）。

---

### 阶段 3：每完成一块 014，就向 015 视角抬头一次

虽然 015（自动化诊断）是并行轨，但建议每完成一个 014 体验点，就想一想：

- 这块体验将来在 015 中如何被诊断？
  - 需要哪些指标（计数/延迟/比率）？
  - 是否需要结构化日志方便诊断规则消费？
- 是否需要在 `config/features/diagnostics.json` 中预留开关或阈值？

暂时可以只在：

- `docs/014-体验优化说明-checklist.md` 的 §6 中追加一两句备注；
- 或在未来的 `docs/015-诊断方案` 中补充「与 014 体验项的依赖关系」。

不要求在 014 阶段就立刻实现所有诊断逻辑，但提前思考能显著减少 015 的设计返工。

---

## 3. 使用方式建议

- 把本文件与 `014-体验优化说明-checklist.md` 并列打开：
  - checklist 负责「列事项、打勾」，
  - 本文件负责「提醒节奏与优先级」；
- 每次启动一轮与链接处理相关的改动前，先快速浏览本文件 §2，选定当前阶段和要落地的一小块体验点；
- 每完成一轮后，在 checklist 最下方的「备注」区域写下本轮完成内容与遗留问题。
