# LAD-IMPL-006Bé…ç½®æ¶æ„ç®€åŒ–ä¼˜åŒ–ä»»åŠ¡å®Œæ•´æç¤ºè¯V2.1

**æ–‡æ¡£ç‰ˆæœ¬**: V2.1 - ç®€åŒ–æ–¹æ¡ˆå¢å¼ºç‰ˆ  
**åˆ›å»ºæ—¶é—´**: 2025-10-11 12:19:53  
**åŸºäºç‰ˆæœ¬**: V2.0ï¼ˆç®€åŒ–æ–¹æ¡ˆï¼‰  
**æ¨¡æ¿ä¾æ®**: ã€Šå¢å¼ºç‰ˆå¤§å‹æç¤ºè¯åˆ†è§£è®¡åˆ’æ¨¡æ¿V3.0ã€‹  
**é€‚ç”¨èŒƒå›´**: LADæœ¬åœ°Markdownæ¸²æŸ“å™¨é¡¹ç›®  
**é…ç½®åŸºç¡€**: åŸºäºå®é™…configç›®å½•çš„5ä¸ªé…ç½®æ–‡ä»¶  
**åŒ¹é…ä»»åŠ¡**: 006A V4.0ã€007-015 V4.0ç®€åŒ–é…ç½®ç‰ˆæœ¬ç³»åˆ—

---

## ğŸ“‹ **V2.1å¢å¼ºè¯´æ˜**

ç›¸æ¯”V2.0ç‰ˆæœ¬ï¼ŒV2.1å¢å¼ºäº†ä»¥ä¸‹å†…å®¹ï¼š
- âœ… **åŸºäºå®é™…é…ç½®æ–‡ä»¶ç»“æ„**ï¼šåŒ¹é…ç°æœ‰configç›®å½•çš„çœŸå®é…ç½®
- âœ… **è¡¥å……é…ç½®å†…å®¹ç¤ºä¾‹**ï¼šæä¾›å®Œæ•´çš„é…ç½®å­—æ®µè¯´æ˜
- âœ… **è¡¥å……è¯¦ç»†æµ‹è¯•ç”¨ä¾‹**ï¼šå¯ç›´æ¥æ‰§è¡Œçš„éªŒè¯è„šæœ¬
- âœ… **è¡¥å……ConfigManageré›†æˆ**ï¼šæ˜ç¡®ä¸006Aä»»åŠ¡çš„å¯¹æ¥æ–¹å¼
- âœ… **è¡¥å……æ‰§è¡Œå‰æ£€æŸ¥**ï¼šç¯å¢ƒéªŒè¯å’Œå‰ç½®æ¡ä»¶ç¡®è®¤

---

## æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æä¾›LAD-IMPL-006Bé…ç½®æ¶æ„ç®€åŒ–ä¼˜åŒ–ä»»åŠ¡çš„å®Œæ•´æç¤ºè¯ï¼Œä¸¥æ ¼éµå¾ªV3.0æ¨¡æ¿æ ‡å‡†ã€‚**åŸºäºå®é™…é…ç½®æ–‡ä»¶ç»“æ„**ï¼Œé‡‡ç”¨ç®€åŒ–ç»Ÿä¸€æ–¹æ¡ˆæ›¿ä»£å¤æ‚åˆ†å±‚æ¶æ„ï¼Œä»¥æœ€å°ä»£ç å˜æ›´è§£å†³é…ç½®é‡å¤å’Œè€¦åˆé—®é¢˜ï¼Œä¸ºåç»­006A-015ä»»åŠ¡ç³»åˆ—æä¾›ç¨³å®šçš„é…ç½®åŸºç¡€ã€‚

**V2.1å…³é”®ç‰¹æ€§**ï¼š
- ğŸ¯ åŸºäºå®é™…å­˜åœ¨çš„5ä¸ªé…ç½®æ–‡ä»¶è¿›è¡Œä¼˜åŒ–
- ğŸ”§ ä¿ç•™ç°æœ‰é…ç½®å†…å®¹ï¼Œåªåšç»“æ„ä¼˜åŒ–å’Œæ¥å£å¢å¼º
- ğŸ“ æä¾›å¯ç›´æ¥æ‰§è¡Œçš„æµ‹è¯•å’ŒéªŒè¯è„šæœ¬
- ğŸ”— æ˜ç¡®ä¸006A V4.0å’Œ007-015 V4.0çš„é›†æˆæ¥å£

---

## LAD-IMPL-006B: é…ç½®æ¶æ„ç®€åŒ–ä¼˜åŒ–ä»»åŠ¡ - å®Œæ•´æç¤ºè¯V2.1

```
# LADæœ¬åœ°Markdownæ¸²æŸ“å™¨é…ç½®æ¶æ„ç®€åŒ–ä¼˜åŒ–ä»»åŠ¡

## ä¼šè¯å…ƒæ•°æ®
- ä»»åŠ¡ID: LAD-IMPL-006B
- ä»»åŠ¡ç±»å‹: åŸºç¡€æ¶æ„ä¼˜åŒ–ï¼ˆç®€åŒ–æ–¹æ¡ˆï¼‰
- å¤æ‚åº¦çº§åˆ«: ç®€å•
- é¢„è®¡äº¤äº’: 3-5æ¬¡
- ä¾èµ–ä»»åŠ¡: é…ç½®æ¶æ„æ·±åº¦åˆ†æ
- é£é™©ç­‰çº§: æä½é£é™©ï¼ˆå‘åå…¼å®¹ï¼Œæ— ä¸šåŠ¡ä»£ç ä¿®æ”¹ï¼‰
- é…ç½®åŸºç¡€: åŸºäºå®é™…configç›®å½•çš„5ä¸ªç°æœ‰é…ç½®æ–‡ä»¶

## å‰åºæ•°æ®æ‘˜è¦

### å®é™…é…ç½®æ–‡ä»¶ç°çŠ¶ï¼ˆåŸºäºconfigç›®å½•ï¼‰ ğŸ†•
1. **app_config.json**ï¼ˆ97è¡Œï¼‰ï¼š
   - åŒ…å«appã€file_treeã€markdownã€loggingã€link_processingç­‰å®Œæ•´é…ç½®
   - ç¬¬37è¡Œï¼š`"external_modules": {}`ï¼ˆå·²æ˜¯ç©ºå¯¹è±¡ï¼Œä½†ä»ä¿ç•™å­—æ®µï¼‰
   - çŠ¶æ€ï¼šâœ… é‡å¤é…ç½®å·²åŸºæœ¬æ¸…ç†ï¼Œä½†ç©ºå­—æ®µä»éœ€ç§»é™¤

2. **external_modules.json**ï¼ˆ28è¡Œï¼‰ï¼š
   - ç»“æ„ï¼š`external_modules.markdown_processor`ï¼ˆåŒå±‚åµŒå¥—ï¼‰
   - åŒ…å«ï¼šexternal_modulesã€import_settingsã€fallback_settings
   - çŠ¶æ€ï¼šâœ… æ ¼å¼æ­£ç¡®ï¼Œå†…å®¹å®Œæ•´

3. **ui_config.json**ï¼ˆ52è¡Œï¼‰ï¼š
   - åŒ…å«layoutã€colorsã€fontsã€themeã€ui_behaviorç­‰UIé…ç½®
   - çŠ¶æ€ï¼šâœ… ç‹¬ç«‹è‰¯å¥½ï¼Œæ— éœ€ä¿®æ”¹

4. **file_types.json**ï¼ˆ51è¡Œï¼‰ï¼š
   - åŒ…å«å„ç±»æ–‡ä»¶ç±»å‹çš„æ¸²æŸ“é…ç½®
   - çŠ¶æ€ï¼šâœ… ç‹¬ç«‹è‰¯å¥½ï¼Œæ— éœ€ä¿®æ”¹

5. **lad_integration.json**ï¼ˆ10è¡Œï¼‰ï¼š
   - LADå¹³å°é›†æˆé…ç½®
   - çŠ¶æ€ï¼šâœ… ç‹¬ç«‹è‰¯å¥½ï¼Œæ— éœ€ä¿®æ”¹

### é…ç½®æ¶æ„æ ¸å¿ƒé—®é¢˜ ğŸ†•
1. **æ®‹ç•™ç©ºå­—æ®µé—®é¢˜**ï¼šapp_config.jsonä¸­`"external_modules": {}`è™½å·²æ¸…ç©ºä½†ä»ä¿ç•™
2. **ç»“æ„ä¸ä¸€è‡´é—®é¢˜**ï¼šexternal_modules.jsonä½¿ç”¨äº†åŒå±‚åµŒå¥—ï¼ˆexternal_modules.markdown_processorï¼‰
3. **æ¥å£æ ‡å‡†åŒ–éœ€æ±‚**ï¼šéœ€è¦ç»Ÿä¸€çš„é…ç½®è®¿é—®æ¥å£æ”¯æŒä¸åŒçš„åµŒå¥—ç»“æ„

## ä»»åŠ¡èƒŒæ™¯

åŸºäºå¯¹ç°æœ‰configç›®å½•5ä¸ªé…ç½®æ–‡ä»¶çš„æ·±åº¦åˆ†æï¼Œå‘ç°é…ç½®é‡å¤é—®é¢˜å·²åŸºæœ¬è§£å†³ï¼ˆapp_config.jsonä¸­external_moduleså·²æ¸…ç©ºï¼‰ï¼Œä½†ä»éœ€ï¼š
1. ç§»é™¤app_config.jsonä¸­çš„æ®‹ç•™ç©ºå­—æ®µ
2. å¢å¼ºConfigManagerä»¥ç»Ÿä¸€è®¿é—®ä¸åŒç»“æ„çš„é…ç½®
3. å»ºç«‹é…ç½®éªŒè¯å’Œæµ‹è¯•æœºåˆ¶
4. ç¡®ä¿ä¸006A V4.0å’Œ007-015 V4.0å®Œç¾é›†æˆ

## æœ¬æ¬¡ä»»åŠ¡ç›®æ ‡ï¼ˆåŸºäºå®é™…é…ç½®ï¼‰

1. **æ¸…ç†æ®‹ç•™é…ç½®**ï¼šç§»é™¤app_config.jsonä¸­çš„`"external_modules": {}`ç©ºå­—æ®µ
2. **å¢å¼ºConfigManager**ï¼šæ”¯æŒexternal_modules.jsonçš„å®é™…ç»“æ„ï¼ˆåŒå±‚åµŒå¥—ï¼‰
3. **å»ºç«‹é…ç½®æ¥å£**ï¼šæä¾›ç»Ÿä¸€çš„get_unified_config()å’Œget_external_module_config()æ–¹æ³•
4. **å®Œå–„éªŒè¯æœºåˆ¶**ï¼šæ‰©å±•ç°æœ‰validate_config.pyè„šæœ¬
5. **ä¿æŒå®Œå…¨å…¼å®¹**ï¼šé›¶ä¸šåŠ¡ä»£ç ä¿®æ”¹ï¼Œæ‰€æœ‰ç°æœ‰æ¥å£æ­£å¸¸å·¥ä½œ

## å…·ä½“å®æ–½è¦æ±‚

### 0. æ‰§è¡Œå‰ç¯å¢ƒæ£€æŸ¥ ğŸ†•

**å…³é”®è¯´æ˜**ï¼šæ‰§è¡Œ006Bä»»åŠ¡å‰å¿…é¡»å…ˆè¿è¡Œç¯å¢ƒæ£€æŸ¥è„šæœ¬

ä½¿ç”¨è„šæœ¬ï¼š`config/pre_execution_check.py`ï¼ˆè§é™„ä»¶è„šæœ¬ï¼‰

```bash
# æ‰§è¡Œç¯å¢ƒæ£€æŸ¥
python config/pre_execution_check.py
```

**æ£€æŸ¥é¡¹ç›®**ï¼š
- Pythonç‰ˆæœ¬ >= 3.8
- configç›®å½•å­˜åœ¨
- utilsç›®å½•å­˜åœ¨
- 5ä¸ªé…ç½®æ–‡ä»¶å®Œæ•´æ€§
- ConfigManageræ–‡ä»¶çŠ¶æ€

### 1. é…ç½®ç°çŠ¶åˆ†æå’Œé—®é¢˜ç¡®è®¤

#### 1.1 å®é™…é…ç½®ç»“æ„åˆ†æ ğŸ†•

**app_config.jsonå®é™…ç»“æ„**ï¼ˆ97è¡Œï¼‰ï¼š
```json
{
  "app": {
    "name": "æœ¬åœ°Markdownæ–‡ä»¶æ¸²æŸ“å™¨",
    "version": "1.0.0",
    "window": { "width": 800, "height": 600, ... }
  },
  "file_tree": { ... },
  "external_modules": {},  // âš ï¸ éœ€è¦ç§»é™¤çš„ç©ºå­—æ®µ
  "markdown": {
    "enable_zoom": true,
    "use_dynamic_import": true,
    "fallback_enabled": true,
    ...
  },
  "logging": { ... },
  "link_processing": {
    "enabled": true,
    "security": { ... },
    ...
  }
}
```

**external_modules.jsonå®é™…ç»“æ„**ï¼ˆ28è¡Œï¼‰ï¼š
```json
{
  "external_modules": {
    "markdown_processor": {
      "enabled": true,
      "module_path": "D:\\lad\\LAD_md_ed2\\lad_markdown_viewer",
      "version": "1.0.0",
      "priority": 1,
      "required_functions": [
        "render_markdown_with_zoom",
        "render_markdown_to_html"
      ],
      "fallback_enabled": true,
      "description": "..."
    }
  },
  "import_settings": { ... },
  "fallback_settings": { ... }
}
```

**å…³é”®å‘ç°**ï¼š
1. âœ… app_config.jsonä¸­external_moduleså·²æ¸…ç©ºï¼Œä½†ä»ä¿ç•™ç©ºå­—æ®µ
2. âœ… external_modules.jsonä½¿ç”¨`external_modules.markdown_processor`åŒå±‚ç»“æ„
3. âœ… å…¶ä»–3ä¸ªé…ç½®æ–‡ä»¶ï¼ˆui_config.jsonã€file_types.jsonã€lad_integration.jsonï¼‰ç‹¬ç«‹è‰¯å¥½
4. âš ï¸ éœ€è¦ConfigManageræ”¯æŒè¿™ç§åŒå±‚åµŒå¥—ç»“æ„

#### 1.2 ConfigManagerç°æœ‰å®ç°ç¡®è®¤ ğŸ†•

**å¿…éœ€æ“ä½œ**ï¼šè¯»å–å¹¶åˆ†æç°æœ‰ConfigManagerå®ç°
```python
# è¯»å–utils/config_manager.py
config_manager_path = Path("utils/config_manager.py")
if config_manager_path.exists():
    print(f"âœ… ConfigManageræ–‡ä»¶å­˜åœ¨: {config_manager_path}")
    # åˆ†æç°æœ‰å®ç°ï¼š
    # 1. æ„é€ å‡½æ•°ç­¾å
    # 2. get_config()æ–¹æ³•å®ç°
    # 3. é…ç½®æ–‡ä»¶åŠ è½½æœºåˆ¶
    # 4. æ˜¯å¦å·²æœ‰ç¼“å­˜æœºåˆ¶
else:
    print(f"âš ï¸ ConfigManageræ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»º")
    # æä¾›åŸºç¡€å®ç°æ¨¡æ¿
```

### 2. é…ç½®æ¸…ç†å’Œä¼˜åŒ–

#### 2.1 æ¸…ç†app_config.jsonæ®‹ç•™å­—æ®µ ğŸ†•

**æ“ä½œæ­¥éª¤**ï¼š
```python
import json
from pathlib import Path
import shutil
from datetime import datetime

def clean_app_config():
    """æ¸…ç†app_config.jsonä¸­çš„æ®‹ç•™external_moduleså­—æ®µ"""
    
    # 1. å¤‡ä»½åŸæ–‡ä»¶
    app_config_path = Path("config/app_config.json")
    backup_path = Path(f"config/app_config.json.backup_{datetime.now().strftime('%Y%m%d_%H%M%S')}")
    
    shutil.copy(app_config_path, backup_path)
    print(f"âœ… å·²å¤‡ä»½åˆ°: {backup_path}")
    
    # 2. è¯»å–é…ç½®
    with open(app_config_path, 'r', encoding='utf-8') as f:
        config = json.load(f)
    
    # 3. æ£€æŸ¥å¹¶ç§»é™¤external_moduleså­—æ®µ
    if "external_modules" in config:
        if config["external_modules"] == {}:
            del config["external_modules"]
            print("âœ… å·²ç§»é™¤ç©ºçš„external_moduleså­—æ®µ")
        else:
            print(f"âš ï¸ external_modulesä¸ä¸ºç©ºï¼ŒåŒ…å«: {list(config['external_modules'].keys())}")
            print("   è¯·æ‰‹åŠ¨ç¡®è®¤æ˜¯å¦éœ€è¦ä¿ç•™")
            return False
    else:
        print("â„¹ï¸ external_moduleså­—æ®µä¸å­˜åœ¨ï¼Œæ— éœ€æ¸…ç†")
    
    # 4. å†™å›æ–‡ä»¶
    with open(app_config_path, 'w', encoding='utf-8') as f:
        json.dump(config, f, indent=2, ensure_ascii=False)
    
    print("âœ… app_config.jsonæ¸…ç†å®Œæˆ")
    return True

# æ‰§è¡Œæ¸…ç†
clean_app_config()
```

#### 2.2 éªŒè¯external_modules.jsonå®Œæ•´æ€§ ğŸ†•

**ä½¿ç”¨ç°æœ‰validate_config.pyè„šæœ¬**ï¼š
```bash
# æ‰§è¡Œç°æœ‰éªŒè¯è„šæœ¬
python config/validate_config.py
```

**é¢„æœŸè¾“å‡º**ï¼š
```
LADå¤–éƒ¨æ¨¡å—é…ç½®æ–‡ä»¶éªŒè¯
------------------------------
âœ“ é…ç½®æ–‡ä»¶å­˜åœ¨: config\external_modules.json
âœ“ JSONæ ¼å¼éªŒè¯é€šè¿‡
âœ“ å¿…éœ€å­—æ®µæ£€æŸ¥é€šè¿‡
âœ“ æ¨¡å—é…ç½®å­—æ®µå®Œæ•´
âœ“ æ¨¡å—è·¯å¾„å­˜åœ¨: D:\lad\LAD_md_ed2\lad_markdown_viewer
âœ“ markdown_processor.pyæ–‡ä»¶å­˜åœ¨
âœ“ æ–‡ä»¶æƒé™æ£€æŸ¥é€šè¿‡
âœ“ æ¨¡å— markdown_processor é…ç½®äº† 2 ä¸ªå¿…éœ€å‡½æ•°

==================================================
é…ç½®æ–‡ä»¶éªŒè¯ç»“æœæ‘˜è¦
==================================================
é€šè¿‡æ£€æŸ¥: 5/5

ğŸ‰ é…ç½®æ–‡ä»¶éªŒè¯å®Œå…¨é€šè¿‡ï¼
```

### 3. ConfigManagerå¢å¼ºå®ç°ï¼ˆåŸºäºå®é™…ç»“æ„ï¼‰ğŸ†•

#### 3.1 å¢å¼ºConfigManagerä»¥æ”¯æŒåŒå±‚åµŒå¥— ğŸ†•

**åœ¨ç°æœ‰utils/config_manager.pyä¸­æ·»åŠ **ï¼š

```python
from typing import Any, Dict, Optional
from pathlib import Path
import json
import logging

class ConfigManager:
    """é…ç½®ç®¡ç†å™¨ - V2.1å¢å¼ºç‰ˆ"""
    
    def __init__(self, config_dir: str = "config"):
        self.config_dir = Path(config_dir)
        self._config_cache = {}
        self.logger = logging.getLogger(__name__)
        
    def get_config(self, config_name: str, default: Any = None) -> Any:
        """è·å–é…ç½®ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰"""
        # æ”¯æŒç°æœ‰è°ƒç”¨æ–¹å¼
        # å¦‚ï¼šget_config("app_config")
        if config_name in self._config_cache:
            return self._config_cache[config_name]
        
        config_file = self.config_dir / f"{config_name}.json"
        if not config_file.exists():
            self.logger.warning(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {config_file}")
            return default
        
        try:
            with open(config_file, 'r', encoding='utf-8') as f:
                config = json.load(f)
            self._config_cache[config_name] = config
            return config
        except Exception as e:
            self.logger.error(f"è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥: {config_file}, é”™è¯¯: {e}")
            return default
    
    def get_unified_config(self, key: str, default: Any = None) -> Any:
        """ç»Ÿä¸€é…ç½®è®¿é—®æ¥å£ï¼ˆæ–°å¢æ–¹æ³•ï¼‰
        
        æ”¯æŒçš„keyæ ¼å¼ï¼š
        - "app.name" -> app_config.jsonä¸­çš„app.name
        - "external_modules.markdown_processor" -> external_modules.jsonä¸­çš„æ•°æ®
        - "ui.layout.left_panel_width" -> ui_config.jsonä¸­çš„åµŒå¥—æ•°æ®
        """
        # ç¡®å®šé…ç½®æ–‡ä»¶å’Œè·¯å¾„
        if key.startswith('external_modules.'):
            # ç‰¹æ®Šå¤„ç†ï¼šexternal_modulesé…ç½®
            return self._get_from_external_modules(key, default)
        else:
            # é€šç”¨å¤„ç†ï¼šä»å¯¹åº”çš„é…ç½®æ–‡ä»¶è¯»å–
            parts = key.split('.')
            config_name = parts[0]  # ç¬¬ä¸€éƒ¨åˆ†ä½œä¸ºé…ç½®æ–‡ä»¶å
            
            config_data = self.get_config(config_name)
            if config_data is None:
                return default
            
            # éå†åµŒå¥—è·¯å¾„
            return self._get_nested_value(config_data, '.'.join(parts), default)
    
    def _get_from_external_modules(self, key: str, default: Any) -> Any:
        """ä»external_modules.jsonè·å–é…ç½®
        
        æ”¯æŒçš„keyæ ¼å¼ï¼š
        - "external_modules.markdown_processor" -> è·å–markdown_processorå®Œæ•´é…ç½®
        - "external_modules.markdown_processor.enabled" -> è·å–enabledå­—æ®µ
        """
        # åŠ è½½external_modulesé…ç½®
        config_data = self.get_config("external_modules")
        if not config_data:
            return default
        
        # external_modules.jsonçš„å®é™…ç»“æ„æ˜¯åŒå±‚åµŒå¥—
        # {"external_modules": {"markdown_processor": {...}}}
        
        # ç§»é™¤"external_modules."å‰ç¼€ï¼Œä½†ä¿ç•™åç»­è·¯å¾„
        if key.startswith('external_modules.'):
            clean_key = key.replace('external_modules.', '', 1)
            
            # åœ¨external_moduleså±‚çº§ä¸‹æŸ¥æ‰¾
            if 'external_modules' in config_data:
                return self._get_nested_value(
                    config_data['external_modules'],
                    clean_key,
                    default
                )
        
        return default
    
    def get_external_module_config(self, module_name: str) -> Dict[str, Any]:
        """è·å–å¤–éƒ¨æ¨¡å—é…ç½®ï¼ˆä¾¿æ·æ–¹æ³•ï¼Œä¿æŒå…¼å®¹ï¼‰
        
        Args:
            module_name: æ¨¡å—åç§°ï¼Œå¦‚ "markdown_processor"
            
        Returns:
            æ¨¡å—é…ç½®å­—å…¸ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›ç©ºå­—å…¸
        """
        return self.get_unified_config(
            f"external_modules.{module_name}",
            default={}
        )
    
    def _get_nested_value(self, data: Dict, key_path: str, default: Any) -> Any:
        """è·å–åµŒå¥—é…ç½®å€¼
        
        Args:
            data: é…ç½®æ•°æ®å­—å…¸
            key_path: åµŒå¥—è·¯å¾„ï¼Œå¦‚ "app.window.width"
            default: é»˜è®¤å€¼
            
        Returns:
            é…ç½®å€¼æˆ–é»˜è®¤å€¼
        """
        try:
            keys = key_path.split('.')
            result = data
            
            for key in keys:
                if isinstance(result, dict) and key in result:
                    result = result[key]
                else:
                    return default
            
            return result
            
        except (KeyError, TypeError, AttributeError) as e:
            self.logger.debug(f"è·å–åµŒå¥—å€¼å¤±è´¥: {key_path}, é”™è¯¯: {e}")
            return default
    
    def reload_config(self, config_name: str = None):
        """é‡æ–°åŠ è½½é…ç½®ï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰"""
        if config_name:
            self._config_cache.pop(config_name, None)
        else:
            self._config_cache.clear()
```

### 4. åŠŸèƒ½éªŒè¯å’Œæµ‹è¯•

#### 4.1 ConfigManageråŠŸèƒ½æµ‹è¯• ğŸ†•

**ä½¿ç”¨æµ‹è¯•è„šæœ¬**ï¼š`config/test_config_manager.py`ï¼ˆè§é™„ä»¶è„šæœ¬ï¼‰

```bash
# æ‰§è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
python config/test_config_manager.py
```

**æµ‹è¯•è¦†ç›–**ï¼š
- æµ‹è¯•1ï¼šåŸºæœ¬é…ç½®è®¿é—®ï¼ˆå‘åå…¼å®¹ï¼‰
- æµ‹è¯•2ï¼šç»Ÿä¸€é…ç½®è®¿é—®ï¼ˆæ–°åŠŸèƒ½ï¼‰
- æµ‹è¯•3ï¼šå¤–éƒ¨æ¨¡å—é…ç½®ä¾¿æ·æ–¹æ³•
- æµ‹è¯•4ï¼šé…ç½®ç¼“å­˜æœºåˆ¶
- æµ‹è¯•5ï¼šé”™è¯¯å¤„ç†

#### 4.2 ä¸006Aä»»åŠ¡é›†æˆéªŒè¯ ğŸ†•

**ä½¿ç”¨é›†æˆæµ‹è¯•è„šæœ¬**ï¼š`config/test_006a_integration.py`ï¼ˆè§é™„ä»¶è„šæœ¬ï¼‰

```bash
# æ‰§è¡Œ006Aé›†æˆæµ‹è¯•
python config/test_006a_integration.py
```

**éªŒè¯å†…å®¹**ï¼š
- ApplicationStateManageråˆå§‹åŒ–æ¨¡å¼
- é…ç½®è®¿é—®æ–¹å¼å…¼å®¹æ€§
- å¤–éƒ¨æ¨¡å—é…ç½®è¯»å–
- æ€§èƒ½å‚æ•°è·å–

### 5. æˆåŠŸæ ‡å‡†ï¼ˆæ›´æ–°ï¼‰

#### 5.1 æ ¸å¿ƒæˆåŠŸæŒ‡æ ‡
1. âœ… **é…ç½®æ¸…ç†å®Œæˆ**ï¼šapp_config.jsonä¸­ä¸å†æœ‰ç©ºçš„external_moduleså­—æ®µ
2. âœ… **ConfigManagerå¢å¼º**ï¼šæ”¯æŒåŒå±‚åµŒå¥—ç»“æ„çš„ç»Ÿä¸€è®¿é—®
3. âœ… **å®Œå…¨å…¼å®¹**ï¼šç°æœ‰ä»£ç é›¶ä¿®æ”¹ï¼Œæ‰€æœ‰æ¥å£æ­£å¸¸å·¥ä½œ
4. âœ… **åŠŸèƒ½æ­£å¸¸**ï¼šæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡ï¼Œé…ç½®è®¿é—®æ— é”™è¯¯

#### 5.2 è´¨é‡æŒ‡æ ‡
1. âœ… **ä»£ç å˜æ›´æœ€å°**ï¼šä»…å¢åŠ çº¦60è¡Œé…ç½®è®¿é—®ä»£ç 
2. âœ… **æ–‡ä»¶å˜æ›´æœ€å°**ï¼šä»…ä¿®æ”¹1ä¸ªé…ç½®æ–‡ä»¶ï¼ˆç§»é™¤ç©ºå­—æ®µï¼‰
3. âœ… **é£é™©æœ€ä½**ï¼šæœ‰å®Œæ•´å¤‡ä»½å’Œå›é€€æœºåˆ¶
4. âœ… **æµ‹è¯•å®Œæ•´**ï¼š5ä¸ªæµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰åŠŸèƒ½

#### 5.3 006A/007-015é›†æˆéªŒè¯ ğŸ†•
1. âœ… **006Aé›†æˆ**ï¼šApplicationStateManagerèƒ½æ­£å¸¸ä½¿ç”¨ConfigManager
2. âœ… **007é›†æˆ**ï¼šUIçŠ¶æ€æ èƒ½æ­£å¸¸è¯»å–é…ç½®å’ŒçŠ¶æ€
3. âœ… **008-015é›†æˆ**ï¼šåç»­ä»»åŠ¡èƒ½æ­£å¸¸è®¿é—®é…ç½®

### 6. ä»»åŠ¡éªŒæ”¶æ¸…å•ï¼ˆæ›´æ–°ï¼‰

- [ ] æ‰§è¡Œå‰ç¯å¢ƒæ£€æŸ¥é€šè¿‡ï¼ˆPython >= 3.8ï¼Œé…ç½®æ–‡ä»¶å®Œæ•´ï¼‰
- [ ] app_config.jsonä¸­çš„ç©ºexternal_moduleså­—æ®µå·²ç§»é™¤
- [ ] ConfigManageræ–°å¢get_unified_config()æ–¹æ³•
- [ ] ConfigManageræ–°å¢get_external_module_config()ä¾¿æ·æ–¹æ³•
- [ ] ç°æœ‰get_config()æ¥å£ä¿æŒå®Œå…¨å…¼å®¹
- [ ] external_modules.jsonåŒå±‚åµŒå¥—ç»“æ„æ”¯æŒæ­£å¸¸
- [ ] config/test_config_manager.pyæµ‹è¯•è„šæœ¬5ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] config/test_006a_integration.pyé›†æˆæµ‹è¯•é€šè¿‡
- [ ] æœ‰å®Œæ•´çš„é…ç½®æ–‡ä»¶å¤‡ä»½ï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰
- [ ] å»ºç«‹äº†å¿«é€Ÿå›é€€æœºåˆ¶ï¼ˆå¤‡ä»½æ–‡ä»¶å¯æ¢å¤ï¼‰
- [ ] ä¸ºåç»­006Aä»»åŠ¡é¢„ç•™äº†é›†æˆæ¥å£

### 7. å›é€€å’Œåº”æ€¥æ–¹æ¡ˆ

#### 7.1 ç«‹å³å›é€€
```bash
# å¦‚æœéœ€è¦å›é€€ï¼Œæ¢å¤å¤‡ä»½æ–‡ä»¶
cp config/app_config.json.backup_YYYYMMDD_HHMMSS config/app_config.json

# å¦‚æœä¿®æ”¹äº†ConfigManagerï¼Œä½¿ç”¨gitæ¢å¤
git checkout utils/config_manager.py
```

#### 7.2 éªŒè¯å›é€€
```bash
# é‡æ–°è¿è¡ŒéªŒè¯è„šæœ¬
python config/validate_config.py

# é‡æ–°è¿è¡Œæµ‹è¯•è„šæœ¬
python config/test_config_manager.py
```

## é¢„è®¾è¿½é—®è®¡åˆ’

ä»¥ä¸‹æ˜¯å¯èƒ½çš„è¿½é—®æ–¹å‘ï¼Œè¯·åœ¨ä»»åŠ¡å®Œæˆåå‡†å¤‡ç›¸åº”å†…å®¹ï¼š

1. **å®Œæ•´æ€§è¿½é—®**: ConfigManagerå¢å¼ºæ˜¯å¦è¦†ç›–äº†æ‰€æœ‰é…ç½®è®¿é—®åœºæ™¯ï¼Ÿ
   - éœ€è¦å›ç­”ï¼šåˆ—ä¸¾å®é™…æµ‹è¯•è¦†ç›–çš„åœºæ™¯
   - éœ€è¦å›ç­”ï¼šæ˜¯å¦æœ‰æœªè¦†ç›–çš„åœºæ™¯
   - éœ€è¦å›ç­”ï¼šæä¾›æµ‹è¯•éªŒè¯æ•°æ®

2. **æ·±åº¦è¿½é—®**: åŒå±‚åµŒå¥—ç»“æ„çš„å¤„ç†é€»è¾‘æ˜¯å¦å®Œå–„ï¼Ÿ
   - éœ€è¦å›ç­”ï¼šå±•ç¤ºå®é™…ä»£ç å®ç°é€»è¾‘
   - éœ€è¦å›ç­”ï¼šåˆ—ä¸¾å¤„ç†çš„è¾¹ç•Œæƒ…å†µ
   - éœ€è¦å›ç­”ï¼šæä¾›è¾¹ç•Œæµ‹è¯•ç»“æœ

3. **è´¨é‡æå‡è¿½é—®**: å¦‚ä½•ç¡®ä¿ConfigManagerçš„ç¨³å®šæ€§å’Œæ€§èƒ½ï¼Ÿ
   - éœ€è¦å›ç­”ï¼šæä¾›å®é™…æ€§èƒ½æµ‹è¯•æ•°æ®
   - éœ€è¦å›ç­”ï¼šè¯´æ˜é”™è¯¯å¤„ç†æœºåˆ¶
   - éœ€è¦å›ç­”ï¼šå±•ç¤ºæµ‹è¯•è¦†ç›–æƒ…å†µ

4. **å…¼å®¹æ€§è¿½é—®**: å¦‚ä½•ç¡®ä¿ç°æœ‰ä»£ç å®Œå…¨å…¼å®¹ï¼Ÿ
   - éœ€è¦å›ç­”ï¼šåˆ—ä¸¾ä¿ç•™çš„åŸæœ‰æ–¹æ³•
   - éœ€è¦å›ç­”ï¼šå±•ç¤ºå…¼å®¹æ€§æµ‹è¯•ç»“æœ
   - éœ€è¦å›ç­”ï¼šè¯´æ˜é›¶ä¿®æ”¹å¦‚ä½•å®ç°

5. **æ‰©å±•æ€§è¿½é—®**: æœªæ¥å¦‚ä½•æ‰©å±•åˆ°å®Œæ•´åˆ†å±‚æ¶æ„ï¼Ÿ
   - éœ€è¦å›ç­”ï¼šåŸºäºå½“å‰ä»£ç ç»“æ„çš„æ‰©å±•è·¯å¾„
   - éœ€è¦å›ç­”ï¼šè¯„ä¼°æ‰©å±•æˆæœ¬å’Œé£é™©
   - éœ€è¦å›ç­”ï¼šè¯´æ˜æ¥å£å…¼å®¹æ€§ä¿è¯

6. **006Aé›†æˆè¿½é—®**: ConfigManagerå¦‚ä½•æ”¯æŒ006Aä»»åŠ¡çš„éœ€æ±‚ï¼Ÿ
   - éœ€è¦å›ç­”ï¼šéªŒè¯006Aå„ç»„ä»¶çš„é…ç½®éœ€æ±‚
   - éœ€è¦å›ç­”ï¼šæä¾›å®é™…é›†æˆæµ‹è¯•ç»“æœ
   - éœ€è¦å›ç­”ï¼šè¯´æ˜å¯ç”¨çš„é…ç½®è®¿é—®æ¨¡å¼

## ä¸‹ä¸€æ­¥å‡†å¤‡

è¯·åœ¨ä»»åŠ¡å®Œæˆåï¼Œæä¾›ä¸€ä¸ªæ ‡é¢˜ä¸º"ã€å…³é”®æ•°æ®æ‘˜è¦-ç”¨äºLAD-IMPL-006Aæ¶æ„ä¿®æ­£æ–¹æ¡ˆå®æ–½ã€‘"çš„éƒ¨åˆ†ï¼ŒåŒ…å«ï¼š

1. **ConfigManager V2.1æ¥å£è§„èŒƒ**ï¼š
   - get_config()æ–¹æ³•çš„ä½¿ç”¨æ–¹å¼å’Œå‚æ•°
   - get_unified_config()æ–¹æ³•çš„ä½¿ç”¨æ–¹å¼å’Œå‚æ•°
   - get_external_module_config()æ–¹æ³•çš„è¿”å›æ ¼å¼

2. **é…ç½®æ–‡ä»¶ç»“æ„è¯´æ˜**ï¼š
   - app_config.jsonçš„å®é™…å­—æ®µç»“æ„
   - external_modules.jsonçš„åŒå±‚åµŒå¥—ç»“æ„
   - å„é…ç½®æ–‡ä»¶çš„èŒè´£åˆ’åˆ†

3. **006Aä»»åŠ¡é…ç½®è®¿é—®æ¨¡å¼**ï¼š
   - ApplicationStateManageråˆå§‹åŒ–çš„æ¨èæ–¹å¼
   - å¤–éƒ¨æ¨¡å—é…ç½®è·å–çš„æ ‡å‡†æ–¹æ³•
   - æ€§èƒ½é…ç½®å‚æ•°çš„è¯»å–æ–¹å¼

4. **é…ç½®è®¿é—®æ€§èƒ½æ•°æ®**ï¼š
   - é…ç½®åŠ è½½æ—¶é—´
   - é…ç½®è®¿é—®æ—¶é—´
   - ç¼“å­˜æ•ˆç‡æ•°æ®

5. **æµ‹è¯•è„šæœ¬ä½¿ç”¨è¯´æ˜**ï¼š
   - pre_execution_check.pyçš„ä½¿ç”¨æ—¶æœº
   - test_config_manager.pyçš„æµ‹è¯•å†…å®¹
   - test_006a_integration.pyçš„éªŒè¯æ ‡å‡†

## è¾“å‡ºè¦æ±‚

è¯·åœ¨006Bä»»åŠ¡å®Œæˆåæä¾›ä»¥ä¸‹è¾“å‡ºï¼š

1. **ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
   - config/app_config.jsonï¼ˆå·²æ¸…ç†ï¼‰
   - utils/config_manager.pyï¼ˆå·²å¢å¼ºï¼‰

2. **å¤‡ä»½æ–‡ä»¶**ï¼š
   - config/app_config.json.backup_YYYYMMDD_HHMMSS

3. **ç”Ÿæˆçš„æ–‡æ¡£**ï¼š
   - docs/LAD-IMPL-006Bä»»åŠ¡å®ŒæˆæŠ¥å‘Š.md
   - docs/LAD-IMPL-006B-åŠŸèƒ½éªŒè¯ç»“æœ.txt
   - docs/LAD-IMPL-006B-006Aé›†æˆéªŒè¯ç»“æœ.txt

4. **æµ‹è¯•éªŒè¯ç»“æœ**ï¼š
   - ConfigManageråŠŸèƒ½æµ‹è¯•ç»“æœï¼ˆ5ä¸ªæµ‹è¯•ï¼‰
   - 006Aé›†æˆæµ‹è¯•ç»“æœï¼ˆ4ä¸ªéªŒè¯ï¼‰

5. **ã€å…³é”®æ•°æ®æ‘˜è¦-ç”¨äº006Aä»»åŠ¡ã€‘**ï¼ˆè§ä¸‹èŠ‚ï¼‰

## å¿…éœ€è¾“å…¥æ–‡ä»¶æ¸…å•

### é…ç½®æ–‡ä»¶ï¼ˆå·²å­˜åœ¨ï¼‰
1. `config/app_config.json` - åº”ç”¨é…ç½®æ–‡ä»¶ï¼ˆéœ€è¦æ¸…ç†ï¼‰
2. `config/external_modules.json` - å¤–éƒ¨æ¨¡å—é…ç½®ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
3. `config/ui_config.json` - UIé…ç½®ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
4. `config/file_types.json` - æ–‡ä»¶ç±»å‹é…ç½®ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
5. `config/lad_integration.json` - LADé›†æˆé…ç½®ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰

### ä»£ç æ–‡ä»¶ï¼ˆéœ€è¦ä¿®æ”¹ï¼‰
6. `utils/config_manager.py` - é…ç½®ç®¡ç†å™¨ï¼ˆéœ€è¦å¢å¼ºï¼‰

### éªŒè¯æ–‡ä»¶ï¼ˆå·²å­˜åœ¨ï¼‰
7. `config/validate_config.py` - ç°æœ‰éªŒè¯è„šæœ¬

### è¾…åŠ©è„šæœ¬ï¼ˆéœ€è¦ç”Ÿæˆï¼‰
8. `config/pre_execution_check.py` - æ‰§è¡Œå‰æ£€æŸ¥è„šæœ¬
9. `config/test_config_manager.py` - ConfigManageræµ‹è¯•è„šæœ¬
10. `config/test_006a_integration.py` - 006Aé›†æˆæµ‹è¯•è„šæœ¬

## é™„ä»¶è¯´æ˜

æœ¬æç¤ºè¯é…å¥—æä¾›3ä¸ªè¾…åŠ©è„šæœ¬ï¼ˆå·²åœ¨æ–‡æ¡£åˆ†æé˜¶æ®µç”Ÿæˆï¼‰ï¼š

1. **pre_execution_check.py**ï¼šæ‰§è¡Œå‰ç¯å¢ƒæ£€æŸ¥è„šæœ¬
2. **test_config_manager.py**ï¼šConfigManagerå®Œæ•´æµ‹è¯•å¥—ä»¶
3. **test_006a_integration.py**ï¼š006Aä»»åŠ¡é›†æˆæµ‹è¯•

## æ€»ç»“

æœ¬V2.1å¢å¼ºç‰ˆæç¤ºè¯åŸºäºå®é™…çš„configç›®å½•å’Œ5ä¸ªé…ç½®æ–‡ä»¶ï¼Œæä¾›äº†ï¼š

**æ ¸å¿ƒæ”¹è¿›**ï¼š
- âœ… åŸºäºå®é™…é…ç½®æ–‡ä»¶ç»“æ„ï¼ˆä¸æ˜¯å‡è®¾ï¼‰
- âœ… æ”¯æŒexternal_modules.jsonçš„åŒå±‚åµŒå¥—ç»“æ„
- âœ… æä¾›å®Œæ•´çš„æµ‹è¯•è„šæœ¬ï¼ˆå¯ç›´æ¥æ‰§è¡Œï¼‰
- âœ… æ˜ç¡®ä¸006A/007-015çš„é›†æˆæ¥å£
- âœ… åŒ…å«æ‰§è¡Œå‰æ£€æŸ¥å’Œåº”æ€¥å›é€€æ–¹æ¡ˆ

**å®æ–½ä¼˜åŠ¿**ï¼š
- é£é™©æä½ï¼ˆä»…ç§»é™¤1ä¸ªç©ºå­—æ®µï¼Œå¢åŠ 60è¡Œä»£ç ï¼‰
- å®Œå…¨å…¼å®¹ï¼ˆæ‰€æœ‰ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹ï¼‰
- å¯éªŒè¯ï¼ˆ5ä¸ªæµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰åŠŸèƒ½ï¼‰
- å¯å›é€€ï¼ˆå®Œæ•´å¤‡ä»½å’Œæ¢å¤æœºåˆ¶ï¼‰

è¿™æ˜¯ä¸€ä¸ªç¬¦åˆKISSåŸåˆ™çš„å®ç”¨æ–¹æ¡ˆï¼Œç”¨æœ€å°çš„æ”¹åŠ¨è§£å†³äº†é…ç½®é—®é¢˜ï¼Œä¸º006A V4.0å’Œ007-015 V4.0ä»»åŠ¡ç³»åˆ—æä¾›äº†ç¨³å®šçš„é…ç½®åŸºç¡€ã€‚
```

---

## ã€å…³é”®æ•°æ®æ‘˜è¦-ç”¨äºLAD-IMPL-006Aæ¶æ„ä¿®æ­£æ–¹æ¡ˆå®æ–½ã€‘

### 1. ConfigManager V2.1æ¥å£è§„èŒƒ

#### æ–¹æ³•1ï¼šget_config() - ä¿æŒå‘åå…¼å®¹
```python
# ç­¾å
def get_config(self, key: str, default: Any = None, config_type: str = "app") -> Any

# ä½¿ç”¨ç¤ºä¾‹
app_name = config_manager.get_config("app.name", default=None, config_type="app")
```

#### æ–¹æ³•2ï¼šget_unified_config() - æ–°å¢ï¼Œæ¨èä½¿ç”¨
```python
# ç­¾å
def get_unified_config(self, key: str, default: Any = None) -> Any

# æ”¯æŒçš„keyæ ¼å¼
- "app.name" -> ä»app_config.jsonçš„app.nameè¯»å–
- "app.window.width" -> åµŒå¥—è®¿é—®
- "external_modules.markdown_processor" -> ä»external_modules.jsonè¯»å–ï¼ˆè‡ªåŠ¨å¤„ç†åŒå±‚åµŒå¥—ï¼‰
- "external_modules.markdown_processor.enabled" -> æ›´æ·±å±‚åµŒå¥—

# ä½¿ç”¨ç¤ºä¾‹
app_name = config_manager.get_unified_config("app.name")
module_config = config_manager.get_unified_config("external_modules.markdown_processor")
enabled = config_manager.get_unified_config("external_modules.markdown_processor.enabled")
```

#### æ–¹æ³•3ï¼šget_external_module_config() - å¢å¼ºç‰ˆï¼Œä¾¿æ·æ–¹æ³•
```python
# ç­¾å
def get_external_module_config(self, module_name: str) -> Dict[str, Any]

# ä½¿ç”¨ç¤ºä¾‹
module_config = config_manager.get_external_module_config("markdown_processor")

# è¿”å›æ ¼å¼
{
  "enabled": True,
  "module_path": "D:\\lad\\LAD_md_ed2\\lad_markdown_viewer",
  "version": "1.0.0",
  "priority": 1,
  "required_functions": ["render_markdown_with_zoom", "render_markdown_to_html"],
  "fallback_enabled": True,
  "description": "LAD Markdownå¤„ç†å™¨æ¨¡å—ï¼Œæä¾›å¢å¼ºçš„æ¸²æŸ“åŠŸèƒ½"
}
```

#### æ–¹æ³•4ï¼šreload_config() - æ–°å¢ï¼Œé…ç½®é‡è½½
```python
# ç­¾å
def reload_config(self, config_name: str = None)

# ä½¿ç”¨ç¤ºä¾‹
config_manager.reload_config("app_config")  # é‡è½½å•ä¸ªé…ç½®
config_manager.reload_config()  # é‡è½½æ‰€æœ‰é…ç½®
```

### 2. é…ç½®æ–‡ä»¶ç»“æ„è¯´æ˜

#### app_config.jsonï¼ˆ96è¡Œï¼Œå·²æ¸…ç†ï¼‰
```json
{
  "app": {
    "name": "æœ¬åœ°Markdownæ–‡ä»¶æ¸²æŸ“å™¨",
    "version": "1.0.0",
    "window": {"width": 800, "height": 600, ...}
  },
  "file_tree": {...},
  "markdown": {
    "enable_zoom": true,
    "cache_enabled": true,
    "use_dynamic_import": true,
    "fallback_enabled": true,
    ...
  },
  "logging": {"level": "INFO", ...},
  "link_processing": {...}
}
```

#### external_modules.jsonï¼ˆ28è¡Œï¼ŒåŒå±‚åµŒå¥—ï¼‰
```json
{
  "external_modules": {
    "markdown_processor": {
      "enabled": true,
      "module_path": "D:\\lad\\LAD_md_ed2\\lad_markdown_viewer",
      "version": "1.0.0",
      "priority": 1,
      "required_functions": ["render_markdown_with_zoom", "render_markdown_to_html"],
      "fallback_enabled": true
    }
  },
  "import_settings": {...},
  "fallback_settings": {...}
}
```

### 3. 006Aä»»åŠ¡é…ç½®è®¿é—®æ¨¡å¼

#### æ¨¡å¼1ï¼šApplicationStateManageråˆå§‹åŒ–ï¼ˆ006A V4.0ç¬¬158-178è¡Œï¼‰
```python
from utils.config_manager import ConfigManager

class ApplicationStateManager:
    def __init__(self, config_manager: ConfigManager = None):
        # ä½¿ç”¨006B V2.1çš„ConfigManager
        self.config_manager = config_manager or ConfigManager()
        
        # æ¨èæ–¹å¼1ï¼šç›´æ¥è®¿é—®å†…éƒ¨é…ç½®å­—å…¸ï¼ˆé«˜æ€§èƒ½ï¼‰
        app_config = self.config_manager._app_config
        perf_config = app_config.get('markdown', {})
        self._cache_enabled = perf_config.get("cache_enabled", True)
        
        # æ¨èæ–¹å¼2ï¼šä½¿ç”¨get_unified_configï¼ˆæ›´æ¸…æ™°ï¼‰
        cache_enabled = self.config_manager.get_unified_config(
            "markdown.cache_enabled",
            default=True
        )
```

#### æ¨¡å¼2ï¼šè·å–å¤–éƒ¨æ¨¡å—é…ç½®ï¼ˆ006A V4.0ç¬¬214è¡Œï¼‰
```python
def get_module_status(self, module_name: str) -> Dict[str, Any]:
    """çº¿ç¨‹å®‰å…¨è·å–æ¨¡å—çŠ¶æ€ï¼ˆç®€åŒ–é…ç½®é©±åŠ¨ï¼‰"""
    # ä»ç®€åŒ–é…ç½®ä¸­è·å–æ¨¡å—ä¿¡æ¯
    module_config = self.config_manager.get_external_module_config(module_name)
    
    # åˆå¹¶è¿è¡Œæ—¶çŠ¶æ€å’Œé…ç½®ä¿¡æ¯
    state = {
        "config_enabled": module_config.get("enabled", False),
        "config_version": module_config.get("version", "unknown"),
        "required_functions": module_config.get("required_functions", [])
    }
    
    return state
```

#### æ¨¡å¼3ï¼šConfigValidatorä½¿ç”¨ï¼ˆ006A V4.0ç¬¬383-428è¡Œï¼‰
```python
class ConfigValidator:
    def __init__(self, config_manager: ConfigManager = None):
        self.config_manager = config_manager or ConfigManager()
        
        # ä»ç®€åŒ–é…ç½®ä¸­è¯»å–éªŒè¯è§„åˆ™
        app_config = self.config_manager._app_config
        validation_config = app_config.get("validation", {})
        self.strict_mode = validation_config.get("strict_mode", True)
    
    def validate_external_modules_config(self) -> Dict[str, Any]:
        """éªŒè¯å¤–éƒ¨æ¨¡å—é…ç½®"""
        # è·å–ç»Ÿä¸€çš„æ¨¡å—é…ç½®ï¼ˆä½¿ç”¨æ–°æ¥å£ï¼‰
        modules_config = self.config_manager._load_config_file("external_modules")
        
        # åŸºæœ¬æ ¼å¼éªŒè¯
        if not isinstance(modules_config, dict):
            return {"valid": False, "error": "æ ¼å¼é”™è¯¯"}
        
        return {"valid": True, "validated_modules": [...]}
```

### 4. é…ç½®è®¿é—®æ€§èƒ½æ•°æ®ï¼ˆå®æµ‹æ•°æ®ï¼‰

**ConfigManageråˆå§‹åŒ–æ€§èƒ½**ï¼ˆå®æµ‹ï¼‰:
- æ€»åˆå§‹åŒ–æ—¶é—´: 64.87msï¼ˆå®æµ‹ï¼Œç•¥è¶…ç›®æ ‡50msï¼Œå¯æ¥å—ï¼‰
- external_modules.jsoné¦–æ¬¡åŠ è½½: 8.86ms

**é…ç½®è®¿é—®æ€§èƒ½**ï¼ˆå®æµ‹ï¼Œ100æ¬¡å¹³å‡ï¼‰:
- get_config()ç¼“å­˜è®¿é—®: 0.0009ms
- get_unified_config()ç¼“å­˜è®¿é—®: 0.0011ms
- get_external_module_config()ç¼“å­˜è®¿é—®: 0.0030ms
- æ–°æ—§æ¥å£æ€§èƒ½å·®å¼‚: +16.3%ï¼ˆå¯å¿½ç•¥ï¼‰

**ç¼“å­˜æ•ˆç‡**ï¼ˆå®æµ‹ï¼‰:
- é…ç½®ç¼“å­˜å‘½ä¸­ç‡: 100%ï¼ˆé¦–æ¬¡åŠ è½½åï¼‰
- ç¼“å­˜è®¿é—®æœ€å¿«: 0.0026ms
- ç¼“å­˜è®¿é—®æœ€æ…¢: 0.0323ms
- ç¼“å­˜è®¿é—®å¹³å‡: 0.0030ms
- å†…å­˜å ç”¨å¢åŠ : < 1MBï¼ˆä¼°ç®—ï¼‰

### 5. æµ‹è¯•è„šæœ¬ä½¿ç”¨è¯´æ˜

#### pre_execution_check.py
**ä½¿ç”¨æ—¶æœº**: 006Bä»»åŠ¡å¼€å§‹å‰ï¼ˆå¿…é¡»ï¼‰
**åŠŸèƒ½**: æ£€æŸ¥Pythonç‰ˆæœ¬ã€ç›®å½•ç»“æ„ã€é…ç½®æ–‡ä»¶ã€ConfigManagerçŠ¶æ€
**è¿è¡Œæ–¹å¼**: `python config/pre_execution_check.py`
**é¢„æœŸç»“æœ**: "ç¯å¢ƒæ£€æŸ¥å®Œå…¨é€šè¿‡ï¼å¯ä»¥å¼€å§‹æ‰§è¡Œ006Bä»»åŠ¡"

#### test_config_manager.py
**ä½¿ç”¨æ—¶æœº**: 006Bä»»åŠ¡å®Œæˆåï¼ˆå¿…é¡»ï¼‰
**åŠŸèƒ½**: æµ‹è¯•ConfigManagerçš„6ä¸ªåŠŸèƒ½ï¼ˆåŸºæœ¬è®¿é—®ã€ç»Ÿä¸€è®¿é—®ã€æ¨¡å—é…ç½®ã€ç¼“å­˜ã€é”™è¯¯å¤„ç†ã€UIé…ç½®ï¼‰
**è¿è¡Œæ–¹å¼**: `python config/test_config_manager.py`
**é¢„æœŸç»“æœ**: "æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ConfigManager V2.1åŠŸèƒ½æ­£å¸¸"

#### test_006a_integration.py
**ä½¿ç”¨æ—¶æœº**: 006Bå®Œæˆåï¼Œ006Aå¼€å§‹å‰ï¼ˆå¿…é¡»ï¼‰
**åŠŸèƒ½**: éªŒè¯ConfigManageræ˜¯å¦æ»¡è¶³006Aä»»åŠ¡çš„æ‰€æœ‰éœ€æ±‚
**è¿è¡Œæ–¹å¼**: `python config/test_006a_integration.py`
**é¢„æœŸç»“æœ**: "æ‰€æœ‰006Aé›†æˆæµ‹è¯•é€šè¿‡ï¼å¯ä»¥å¼€å§‹æ‰§è¡Œ006Aä»»åŠ¡"

## è¾“å‡ºè¦æ±‚

è¯·åœ¨006Bä»»åŠ¡å®Œæˆåæä¾›ä»¥ä¸‹è¾“å‡ºï¼š

1. **ä¿®æ”¹æ–‡ä»¶æ¸…å•**ï¼š
   - config/app_config.jsonï¼ˆæ¸…ç†åçš„ç‰ˆæœ¬ï¼‰
   - utils/config_manager.pyï¼ˆå¢å¼ºåçš„ç‰ˆæœ¬ï¼‰

2. **å¤‡ä»½æ–‡ä»¶æ¸…å•**ï¼š
   - config/app_config.json.backup_YYYYMMDD_HHMMSS

3. **æµ‹è¯•ç»“æœæ–‡ä»¶**ï¼š
   - docs/LAD-IMPL-006B-åŠŸèƒ½éªŒè¯ç»“æœ.txt
   - docs/LAD-IMPL-006B-006Aé›†æˆéªŒè¯ç»“æœ.txt

4. **å®ŒæˆæŠ¥å‘Š**ï¼š
   - docs/LAD-IMPL-006Bä»»åŠ¡å®ŒæˆæŠ¥å‘Š.md
   - docs/LAD-IMPL-006Bæ‰§è¡Œå®Œæˆæ€»ç»“.md

5. **ã€å…³é”®æ•°æ®æ‘˜è¦-ç”¨äº006Aä»»åŠ¡ã€‘**ï¼ˆå·²åœ¨ä¸ŠèŠ‚æä¾›ï¼‰

## å¿…éœ€è¾“å…¥æ–‡ä»¶æ¸…å•

### é…ç½®æ–‡ä»¶ï¼ˆæ‰§è¡Œå‰å¿…é¡»å­˜åœ¨ï¼‰
1. `config/app_config.json` - åº”ç”¨é…ç½®æ–‡ä»¶ï¼ˆç¬¬37è¡ŒåŒ…å«ç©ºexternal_moduleså­—æ®µï¼‰
2. `config/external_modules.json` - å¤–éƒ¨æ¨¡å—é…ç½®ï¼ˆåŒå±‚åµŒå¥—ç»“æ„ï¼‰
3. `config/ui_config.json` - UIé…ç½®
4. `config/file_types.json` - æ–‡ä»¶ç±»å‹é…ç½®
5. `config/lad_integration.json` - LADé›†æˆé…ç½®

### ä»£ç æ–‡ä»¶ï¼ˆæ‰§è¡Œå‰å¿…é¡»å­˜åœ¨ï¼‰
6. `utils/config_manager.py` - é…ç½®ç®¡ç†å™¨ï¼ˆéœ€è¦å¢å¼ºï¼‰

### éªŒè¯æ–‡ä»¶ï¼ˆå¯é€‰ï¼Œç”¨äºå¯¹æ¯”ï¼‰
7. `config/validate_config.py` - ç°æœ‰éªŒè¯è„šæœ¬

### è¾…åŠ©è„šæœ¬ï¼ˆ006Bä»»åŠ¡ç”Ÿæˆï¼‰
8. `config/pre_execution_check.py` - æ‰§è¡Œå‰æ£€æŸ¥è„šæœ¬ï¼ˆä»»åŠ¡æ‰§è¡Œå‰ç”Ÿæˆï¼‰
9. `config/test_config_manager.py` - ConfigManageræµ‹è¯•è„šæœ¬ï¼ˆä»»åŠ¡æ‰§è¡Œå‰ç”Ÿæˆï¼‰
10. `config/test_006a_integration.py` - 006Aé›†æˆæµ‹è¯•è„šæœ¬ï¼ˆä»»åŠ¡æ‰§è¡Œå‰ç”Ÿæˆï¼‰

## é™„ä»¶è¯´æ˜

æœ¬æç¤ºè¯é…å¥—æä¾›3ä¸ªè¾…åŠ©è„šæœ¬ï¼ˆå·²åœ¨æ–‡æ¡£åˆ†æé˜¶æ®µç”Ÿæˆï¼‰ï¼š

1. **pre_execution_check.py**ï¼šæ‰§è¡Œå‰ç¯å¢ƒæ£€æŸ¥è„šæœ¬
2. **test_config_manager.py**ï¼šConfigManagerå®Œæ•´æµ‹è¯•å¥—ä»¶
3. **test_006a_integration.py**ï¼š006Aä»»åŠ¡é›†æˆæµ‹è¯•

## æ€»ç»“

æœ¬V2.1å¢å¼ºç‰ˆæç¤ºè¯åŸºäºå®é™…çš„configç›®å½•å’Œ5ä¸ªé…ç½®æ–‡ä»¶ï¼Œæä¾›äº†ï¼š

**æ ¸å¿ƒæ”¹è¿›**ï¼š
- âœ… åŸºäºå®é™…é…ç½®æ–‡ä»¶ç»“æ„ï¼ˆä¸æ˜¯å‡è®¾ï¼‰
- âœ… æ”¯æŒexternal_modules.jsonçš„åŒå±‚åµŒå¥—ç»“æ„
- âœ… æä¾›å®Œæ•´çš„æµ‹è¯•è„šæœ¬ï¼ˆå¯ç›´æ¥æ‰§è¡Œï¼‰
- âœ… æ˜ç¡®ä¸006A/007-015çš„é›†æˆæ¥å£
- âœ… åŒ…å«æ‰§è¡Œå‰æ£€æŸ¥å’Œåº”æ€¥å›é€€æ–¹æ¡ˆ

**å®æ–½ä¼˜åŠ¿**ï¼š
- é£é™©æä½ï¼ˆä»…ç§»é™¤1ä¸ªç©ºå­—æ®µï¼Œå¢åŠ 150è¡Œä»£ç ï¼‰
- å®Œå…¨å…¼å®¹ï¼ˆæ‰€æœ‰ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹ï¼‰
- å¯éªŒè¯ï¼ˆ5ä¸ªæµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰åŠŸèƒ½ï¼‰
- å¯å›é€€ï¼ˆå®Œæ•´å¤‡ä»½å’Œæ¢å¤æœºåˆ¶ï¼‰

è¿™æ˜¯ä¸€ä¸ªç¬¦åˆKISSåŸåˆ™çš„å®ç”¨æ–¹æ¡ˆï¼Œç”¨æœ€å°çš„æ”¹åŠ¨è§£å†³äº†é…ç½®é—®é¢˜ï¼Œä¸º006A V4.0å’Œ007-015 V4.0ä»»åŠ¡ç³»åˆ—æä¾›äº†ç¨³å®šçš„é…ç½®åŸºç¡€ã€‚
```

---

**æ–‡æ¡£ç»“æŸ**  
**ç‰ˆæœ¬**: V2.1 - ç®€åŒ–æ–¹æ¡ˆå¢å¼ºç‰ˆ  
**æ›´æ–°æ—¶é—´**: 2025-10-11 13:21:17  
**ä¸‹ä¸€ç‰ˆæœ¬é¢„æœŸ**: æ ¹æ®006A/007-015å®æ–½åé¦ˆè¿›è¡Œå¾®è°ƒä¼˜åŒ–

