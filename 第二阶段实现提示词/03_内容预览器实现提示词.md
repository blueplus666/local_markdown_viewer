# 第二阶段核心功能实现 - 提示词3：内容预览器实现

## 会话元数据
- 前序会话ID: 02_Markdown渲染器实现
- 会话ID: 03_内容预览器实现
- 会话类型: 组件开发
- 复杂度级别: 中等
- 当前交互次数: 0/8
- 会话状态: 进行中

## 前序数据摘要
基于前两个提示词的实现结果，我们需要以下信息：

**文件解析器信息**：
1. FileResolver类的完整接口定义
2. 支持的文件类型列表
3. 编码检测支持列表

**Markdown渲染器信息**：
1. MarkdownRenderer类的完整接口定义
2. 支持的渲染选项列表
3. 性能优化措施

**注意**：如果前序提示词执行失败或未提供完整资料，请使用以下测试数据：
```
【测试数据-组件接口】
FileResolver类接口：
- resolve_file(file_path, base_path=None): 解析文件路径
- analyze_file_type(file_path): 分析文件类型
- detect_encoding(file_path): 检测文件编码
- get_file_info(file_path): 获取文件信息

MarkdownRenderer类接口：
- render(markdown_content): 渲染Markdown内容
- render_file(file_path): 渲染Markdown文件
- get_rendered_html(markdown_text): 获取渲染后的HTML

支持的文件类型：['md', 'markdown', 'txt', 'py', 'js', 'html', 'css', 'json', 'xml', 'yaml', 'ini', 'conf']
编码检测支持：['utf-8', 'gbk', 'latin-1', 'ascii']
```

## 本次任务
基于上述数据，请完成以下分析：
1. 创建 `core/content_preview.py` 文件
2. 实现文本文件预览功能
3. 实现代码文件预览功能
4. 实现二进制文件信息显示功能
5. 生成预览HTML功能

## 分析要求
1. 充分利用前序数据作为基础
2. 重点关注非Markdown文件的预览需求
3. 解决以下关键问题：
   - 如何为不同文件类型提供合适的预览格式
   - 如何处理大文件的预览性能问题
   - 如何提供语法高亮支持
   - 如何处理二进制文件的预览

## 输入资料
- 项目根目录：`LAD_md_ed2/local_markdown_viewer/`
- 前序提示词的输出：
  - `outputs/01_文件解析器实现结果.md`
  - `outputs/02_Markdown渲染器实现结果.md`
- 工具模块：`utils/config_manager.py`

## 技术要求
1. **文本文件预览**：
   - 支持纯文本文件预览
   - 支持配置文件预览
   - 支持日志文件预览
   - 提供行号显示
   - 支持文本搜索高亮

2. **代码文件预览**：
   - 支持常见编程语言语法高亮
   - 支持代码折叠功能
   - 支持行号显示
   - 支持代码注释处理
   - 提供代码格式化选项

3. **二进制文件信息显示**：
   - 显示文件基本信息（大小、类型等）
   - 显示文件头信息
   - 提供十六进制预览
   - 显示文件结构分析

4. **HTML生成**：
   - 生成自包含的HTML
   - 支持CSS样式定制
   - 支持JavaScript交互
   - 确保跨浏览器兼容性

## 输出要求
1. **核心文件**：`core/content_preview.py`
   - 包含ContentPreview类
   - 实现所有核心方法
   - 包含完整的错误处理
   - 代码行数不超过400行

2. **样式文件**：`resources/preview_styles.css`
   - 包含预览样式定义
   - 支持语法高亮样式
   - 支持响应式设计
   - 代码行数不超过200行

3. **测试文件**：`tests/test_content_preview.py`
   - 包含基本预览测试
   - 包含错误情况测试
   - 包含性能测试
   - 代码行数不超过200行

4. **输出文件**：`outputs/03_内容预览器实现结果.md`
   - 记录实现过程
   - 记录支持的文件类型
   - 记录测试结果
   - 记录下一步需要的资料

## 预设追问计划
1. 关于语法高亮的深度追问：如何支持更多编程语言？
2. 关于性能优化的完整性追问：如何优化大文件预览？
3. 关于用户体验的质量提升追问：如何提供更好的预览体验？

## 下一步准备
请在分析完成后，提供一个标题为"【内容预览器实现结果-用于文件树组件实现】"的部分，包含：
1. ContentPreview类的完整接口定义
2. 支持的文件类型和预览方式列表
3. 性能优化措施
4. 已知的限制和注意事项
5. 测试覆盖情况

这些发现将直接用于下一步的文件树组件实现，请确保信息的相关性和实用性。

## 容错机制
- 如果语法高亮库不可用，提供基本的文本预览
- 如果前序提示词的输出不完整，使用测试数据
- 如果预览失败，提供降级到基本信息显示
- 如果性能测试失败，提供优化建议

## 质量要求
- 代码必须通过基本语法检查
- 所有公共方法必须有文档字符串
- 错误处理必须完整且用户友好
- 预览结果必须美观且易读
- 支持的文件类型必须覆盖常见格式 