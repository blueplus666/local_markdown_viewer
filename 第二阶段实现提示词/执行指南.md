# 第二阶段核心功能实现提示词执行指南

## 概述
本指南说明如何使用第二阶段核心功能实现的6个系列提示词，按照构建计划的步骤顺序执行。

## 提示词列表

### 1. 文件解析器实现
- **文件**: `01_文件解析器实现提示词.md`
- **目标**: 实现智能文件类型识别和路径解析功能
- **复杂度**: 非复杂 (5次交互)
- **预计时间**: 2-3小时
- **输出**: `core/file_resolver.py`, `tests/test_file_resolver.py`, `outputs/01_文件解析器实现结果.md`

### 2. Markdown渲染器实现
- **文件**: `02_Markdown渲染器实现提示词.md`
- **目标**: 集成markdown_processor.py组件
- **复杂度**: 非复杂 (5次交互)
- **预计时间**: 1-2小时
- **输出**: `core/markdown_renderer.py`, `tests/test_markdown_renderer.py`, `outputs/02_Markdown渲染器实现结果.md`

### 3. 内容预览器实现
- **文件**: `03_内容预览器实现提示词.md`
- **目标**: 实现非Markdown文件的预览功能
- **复杂度**: 中等 (8次交互)
- **预计时间**: 2-3小时
- **输出**: `core/content_preview.py`, `resources/preview_styles.css`, `tests/test_content_preview.py`, `outputs/03_内容预览器实现结果.md`

### 4. 文件树组件实现
- **文件**: `04_文件树组件实现提示词.md`
- **目标**: 实现左侧文件浏览器
- **复杂度**: 中等 (8次交互)
- **预计时间**: 3-4小时
- **输出**: `ui/file_tree.py`, `ui/styles/file_tree.css`, `tests/test_file_tree.py`, `outputs/04_文件树组件实现结果.md`

### 5. 内容显示组件实现
- **文件**: `05_内容显示组件实现提示词.md`
- **目标**: 实现右侧内容显示区域
- **复杂度**: 中等 (8次交互)
- **预计时间**: 3-4小时
- **输出**: `ui/content_viewer.py`, `ui/styles/content_viewer.css`, `tests/test_content_viewer.py`, `outputs/05_内容显示组件实现结果.md`

### 6. 集成测试
- **文件**: `06_集成测试提示词.md`
- **目标**: 验证所有组件协同工作
- **复杂度**: 高度 (12次交互)
- **预计时间**: 2-3小时
- **输出**: `main_window_integrated.py`, `tests/test_integration.py`, `test_data/`, `outputs/06_集成测试结果.md`

## 执行顺序

### 第一步：准备环境
1. 确保项目根目录存在：`LAD_md_ed2/local_markdown_viewer/`
2. 确保第一阶段基础框架已建立
3. 创建输出目录：`outputs/`
4. 创建测试目录：`tests/`

### 第二步：依赖关系验证
在执行每个提示词前，验证以下依赖：

1. **环境依赖**：
   - Python 3.8+ 环境
   - 必要的Python包已安装
   - 项目目录结构正确

2. **前序输出验证**：
   - 检查前序提示词的输出文件是否存在
   - 验证输出文件格式是否正确
   - 确认关键信息是否完整

3. **资源可用性**：
   - 检查磁盘空间是否充足
   - 验证网络连接（如需要）
   - 确认权限设置正确

### 第三步：顺序执行提示词
按照以下顺序执行提示词：

1. **执行提示词1**: 文件解析器实现
   - 输入：项目根目录、配置文件、工具模块
   - 输出：FileResolver类、测试文件、实现结果文档

2. **执行提示词2**: Markdown渲染器实现
   - 输入：提示词1的输出 + markdown_processor模块
   - 输出：MarkdownRenderer类、测试文件、实现结果文档

3. **执行提示词3**: 内容预览器实现
   - 输入：提示词1和2的输出
   - 输出：ContentPreview类、样式文件、测试文件、实现结果文档

4. **执行提示词4**: 文件树组件实现
   - 输入：提示词1、2、3的输出 + 主窗口文件
   - 输出：FileTree类、样式文件、测试文件、实现结果文档

5. **执行提示词5**: 内容显示组件实现
   - 输入：提示词1、2、3、4的输出 + 主窗口文件
   - 输出：ContentViewer类、样式文件、测试文件、实现结果文档

6. **执行提示词6**: 集成测试
   - 输入：所有前序提示词的输出
   - 输出：集成主窗口、测试文件、测试数据、测试结果文档

## 容错机制

### 前序提示词失败处理
如果某个前序提示词执行失败：
1. 使用提示词中提供的测试数据
2. 记录失败原因和影响范围
3. 继续执行后续提示词
4. 在最终集成测试中验证功能完整性

### 输入资料不足处理
如果发现输入资料不足：
1. 明确提示需要补充的资料
2. 不虚构假想资料
3. 如确有必要，创建测试数据并明确说明
4. 记录资料缺失情况

### 输出质量保证
1. 单个文件不超过500行
2. 大文件合理拆分成多个小文件
3. 代码和文档都适用此原则
4. 确保输出质量，避免难以恢复的错误

## 质量检查点

### 每个提示词完成后检查
1. **代码质量**：
   - 语法检查通过
   - 文档字符串完整
   - 错误处理完善

2. **测试覆盖**：
   - 基本功能测试
   - 错误情况测试
   - 边界条件测试

3. **输出文档**：
   - 实现过程记录
   - 关键设计决策
   - 下一步需要的资料

### 质量检查清单
每个提示词完成后，必须完成以下检查：

#### 代码质量检查
- [ ] 代码语法检查通过（无语法错误）
- [ ] 所有公共方法有完整的文档字符串
- [ ] 错误处理覆盖所有可能的异常情况
- [ ] 代码风格符合PEP 8规范
- [ ] 变量命名清晰且有意义

#### 功能完整性检查
- [ ] 核心功能按设计要求实现
- [ ] 所有必需的方法都已实现
- [ ] 接口定义清晰且一致
- [ ] 支持的功能范围符合预期

#### 测试覆盖检查
- [ ] 单元测试覆盖率 >= 80%
- [ ] 包含基本功能测试用例
- [ ] 包含错误情况测试用例
- [ ] 包含边界条件测试用例
- [ ] 测试用例执行全部通过

#### 性能指标检查
- [ ] 响应时间满足性能要求
- [ ] 内存使用在合理范围内
- [ ] 支持的文件大小符合预期
- [ ] 无明显的性能瓶颈

#### 输出文档检查
- [ ] 实现过程记录完整
- [ ] 关键设计决策有详细说明
- [ ] 下一步需要的资料明确列出
- [ ] 已知问题和限制已记录
- [ ] 测试结果有详细记录

### 集成测试完成后检查
1. **功能完整性**：
   - 所有组件正确集成
   - 基本流程完整
   - 错误处理有效

2. **性能指标**：
   - 文件树加载时间 < 1秒
   - Markdown渲染时间 < 2秒
   - 内存占用 < 200MB

3. **用户体验**：
   - 界面响应流畅
   - 操作直观易用
   - 错误提示友好

## 预期成果

### 功能完整性
- ✅ 完整的文件树浏览功能
- ✅ 智能文件类型识别
- ✅ Markdown文件渲染
- ✅ 多种文件类型预览
- ✅ 配置驱动的界面

### 技术指标
- 代码总行数：约2000-2500行
- 测试覆盖率：不低于80%
- 支持文件类型：10+种
- 错误处理：完整覆盖

### 用户体验
- 直观的文件浏览界面
- 流畅的内容显示
- 友好的错误提示
- 响应式的用户交互

## 注意事项

1. **顺序执行**：严格按照提示词顺序执行，确保依赖关系正确
2. **资料传递**：每个提示词都要检查前序输出资料的完整性
3. **质量保证**：每个提示词都要确保输出质量，避免累积错误
4. **容错处理**：遇到问题时使用容错机制，不中断整体流程
5. **文档记录**：详细记录实现过程和关键决策，便于后续维护

## 时间规划

- **总预计时间**: 12-18小时
- **单个提示词**: 1-4小时
- **集成测试**: 2-3小时
- **质量检查**: 1-2小时

建议分2-3天完成，每天执行2-3个提示词，确保每个步骤都有充分的时间进行质量检查。 