# 方案3.3 对齐校验与缺失清单

> 目的：对齐 `方案3_提示词3.3_实施链接处理模块.md` 的“输入要求与执行条件”，列出当前缺失项与补齐计划，避免残缺推进。

## 一、清单概览（必需项与状态）

- 方案4-混合架构-实施报告.md：缺失（以索引方式替代，待补齐）
- LinkProcessor 的完整实施：未完成（当前为骨架，待 3.3 执行时完善）
- UI 层集成代码（`ui/content_viewer.py` 中集成）：未完成（需在 3.3 开发中完成）
- 方案3-链接处理模块-实施报告.md：缺失（已创建模板，待回填）

## 二、现状说明

- 4.3.4 已完成质量保证与部署实施，部署与回退、聚合门禁测试已就绪。
- 方案C 模块已迁入稳定目录（`integration/`、`monitoring/`、`benchmarks/`）。
- LinkProcessor 仍为“最小可导入骨架”，测试覆盖骨架能力，未完成全量功能与 UI 集成。

## 三、补齐方案

1) 方案4-混合架构-实施报告.md
- 处理方式：提供“实施报告（索引版）”，引用现有 4.x 文档与 4.3.4 报告，满足 3.3 的依赖引用；如需正式版，可在 3.3 收尾阶段生成“合订稿”。
- 路径：`outputs/方案4-混合架构-实施报告.md`

2) LinkProcessor 完整实施
- 范围：识别器、处理器集合（External/RelativeMarkdown/Directory/Anchor/...）、策略与验证、错误码、日志、配置、可扩展注册。
- 步骤：
  - A. 补齐处理器实现与注册/动态加载
  - B. 安全策略（域名/协议白名单、禁止模式、深度限制、ACL可选）
  - C. 扩展 UI 交互（链接点击、预览、状态提示）
- 输出：实现代码 + 单元/集成测试 + 报告回填。

3) UI 层集成（`ui/content_viewer.py`）
- 范围：与 QWebEngine 的链接点击拦截/导航联动、错误提示、跳转/滚动锚点、目录浏览。
- 步骤：
  - A. 增加 LinkProcessor 注入点与回调
  - B. 针对 markdown 链接点击行为的拦截与分派
  - C. 与 FileResolver/ContentPreview 联动

4) 方案3-链接处理模块-实施报告.md
- 已创建模板文件：`outputs/方案3-链接处理模块-实施报告.md`
- 回填内容：按提示词结构在实施推进过程中逐项补充。

## 四、时间与责任

- D1：补齐“实施报告（索引版）”与实施报告模板
- D1-D3：LinkProcessor 功能实现（A/B）与单测
- D3-D4：UI 集成（A/B/C）与联调
- D4：报告回填与复核；门禁通过

## 五、风险与应对

- PyQt Web 引擎事件拦截兼容性：采用最小注入点、可回退策略
- 链接安全策略过严影响体验：提供配置开关与白名单可控
- 路径解析跨平台差异：统一 Path/URL 解析并覆盖单测

---

本清单随 3.3 实施动态更新，直至全部勾清。 

