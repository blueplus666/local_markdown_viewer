# 方案2_提示词2.1_分析混合架构模块导入需求

[⏰ 时区时间：{执行时填写}]

## 任务目标
在不修改现有功能前提下，系统分析并明确“方案B：混合架构（Hybrid）”下的模块导入需求与约束，形成可执行的需求分析报告，作为后续设计与实施的输入。

## 参考依据（必须）
- 请严格对照文件：`D:\lad\LAD_md_ed2\ai-log\vm\本地Markdown文件渲染程序-重构过程-待完善-方案2提示词分析2025-08-11.md` 中的【趋利避害的解决方案-方案B：混合架构（推荐）】段落。

## 输入要求
请分析以下资料（若不存在，需在“资料不足提示”中逐项列出）：
1. 现有渲染与路径相关文件：`markdown_renderer.py`、`file_resolver.py`、`content_preview.py`、`content_viewer.py`、`file_tree.py`
2. 配置：`app_config.json`、`file_types.json`、`ui_config.json`
3. UI主入口：`main.py`、`main_window.py`、`main_window_integrated.py`（或同等入口）
4. 历史实现提示词与现有文档（仅做参照，不作为隐形输入）

## 分析要求
1. 明确混合架构的核心能力与边界：
   - 动态导入器：`DynamicModuleImporter` 的需求点（缓存、fallback、多路径、错误可观测）
   - 静态/统一解析：`FileResolver` 的职责与配合方式
   - 渲染器：`HybridMarkdownRenderer` 的能力检测、优先级、降级链路
2. 梳理与配置的关系：`external_modules.*`、`markdown.*` 的最小必需字段与校验规则
3. 输入/输出与资料传递：后续设计步骤必须依赖哪些“本地文件化”的资料
4. 兼容性与改动范围：禁止修改与方案内容无关的代码或文档
5. 性能与稳定性：冷启动/热切换成本、导入失败容错、日志与可观测性

## 输出要求（保存到 outputs/）
请输出到目录：
`D:\lad\LAD_md_ed2\local_markdown_viewer\第二阶段实现提示词\本地Markdown文件渲染程序-重构过程-第二阶段核心功能-06_后期完善-实现提示词\outputs`

- `混合架构模块导入需求分析报告.md`

## 输出格式
```markdown
# 混合架构模块导入需求分析报告

## 1. 背景与目标
[简述采用混合架构的目的与范围]

## 2. 架构要点与约束
- DynamicModuleImporter 需求与接口边界
- FileResolver 职责与与之交互的最小接口
- HybridMarkdownRenderer 的能力检测、优先级、降级链

## 3. 配置项与验证
- 必需字段清单、默认值策略、校验规则
- 失败与回退策略

## 4. 资料与数据流
- 本步骤产出的本地文件清单（供后续使用）
- 后续步骤的输入契约（不包含隐形资料）

## 5. 兼容性与改动范围
- 不可修改与方案内容无关的代码或文档
- 对现有功能的影响评估

## 6. 风险与缓解
- 依赖丢失、路径异常、导入失败的处理
```

## 注意事项
1. 本步骤仅产出分析报告，不做任何代码改动。
2. 单个输出≤500行；如超出，请拆分并按章节命名：`混合架构模块导入需求分析报告_1.md`、`_2.md` ...
3. 大文件需边生成边保存；发生中断时应可从最近的有效片段恢复。
4. 严禁虚构资料；资料不足时必须停止并输出“资料不足提示”。
5. 资料传递必须以本地文件形式进行，不得依赖口头上下文。

## 资料不足提示（模板）
如发现资料不足，请输出到 outputs：`混合架构模块导入需求-资料不足清单.md`，列出缺失项及用途，并停止执行。

## 输入资料检查要求
1. 上述“输入要求”中的各文件是否存在且可访问。
2. 方案B相关文档是否可读取。

## 输出资料完整性要求
请确保输出文件完整覆盖“输出格式”的全部章节，无隐形资料依赖，并在末尾附上“下一步所需关键数据摘要”。

