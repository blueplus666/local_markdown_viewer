# 方案2_提示词2.2_设计混合架构模块导入方案

[⏰ 时区时间：{执行时填写}]

## 任务目标
基于“混合架构模块导入需求分析报告.md”，产出可实施的混合架构导入方案设计文档。

## 参考依据（必须）
- `D:\lad\LAD_md_ed2\ai-log\vm\本地Markdown文件渲染程序-重构过程-待完善-方案2提示词分析2035-08-11.md` 中【方案B：混合架构（推荐）】

## 输入要求
1. `outputs/混合架构模块导入需求分析报告.md`（由上一步产出）
2. 现有文件结构与配置概览（只作为对照，不进行修改）

## 设计要求
1. 组件设计：
   - `DynamicModuleImporter`：缓存、回退、多路径、错误可观测、接口定义
   - `HybridMarkdownRenderer`：可用性检测、优先级、降级链路
   - 与 `FileResolver` 的交互契约
2. 配置设计：
   - `external_modules.*`、`markdown.*` 的字段、默认值、校验与错误提示
   - 功能开关：`use_dynamic_import`、`fallback_enabled`、`cache_enabled`
3. 错误处理与日志：
   - 导入失败的多级回退策略
   - 关键路径日志与可观测性
4. 兼容性与改动范围：禁止修改与方案无关的代码或文档；保持向后兼容

## 输出要求（保存到 outputs/）
输出目录：`D:\lad\LAD_md_ed2\local_markdown_viewer\第二阶段实现提示词\本地Markdown文件渲染程序-重构过程-第二阶段核心功能-06_后期完善-实现提示词\outputs`
- `混合架构模块导入方案设计.md`

## 输出格式
```markdown
# 混合架构模块导入方案设计

## 1. 设计目标
[目标与边界]

## 2. 架构与组件
- 2.1 DynamicModuleImporter（职责、接口、流程图）
- 2.2 HybridMarkdownRenderer（能力检测、优先级、降级）
- 2.3 与 FileResolver 的交互契约

## 3. 配置方案
- 字段与默认值、校验、错误提示
- 样例配置（≤50行）

## 4. 错误处理与回退
- 失败场景、回退顺序、日志规范

## 5. 向后兼容性
- 兼容策略与边界条件

## 6. 实施计划
- 任务拆分、文件改动清单、风险与缓解
```

## 注意事项
1. 本步骤仅输出设计，不产生代码改动。
2. 单文件≤500行；超出请拆分：`混合架构模块导入方案设计_1.md` 等。
3. 边生成边保存，确保中断可恢复。
4. 严禁虚构资料；若上一步输出缺失，必须先产出“资料不足清单”并停止。
5. 资料传递以本地文件为唯一来源。

## 输入资料检查要求
1. `outputs/混合架构模块导入需求分析报告.md` 是否存在且完整。

## 输出资料完整性要求
确保覆盖“输出格式”的全部章节，并在末尾附“实施关键数据摘要”，供下一步使用。

